!function(e){function t(t,a){var n,c,d;n=t.attr("data-type"),c=e.Event("acf_duplicate:"+n),c.destination=a,t.trigger(c),c.isDefaultPrevented()||(i[n]?i[n](t,a):i._default(t,a,n),d=e.Event("acf_duplicated:"+n),d.destination=a,t.trigger(d))}function a(a,n,i){var i=i||"> .acf-field, > .acf-fields > .acf-field",c=a.find(i),d=n.find(i);c.each(function(a,n){return d[a]?e(c[a]).data("type")!==e(d[a]).data("type")?(console.trace("Error: source field type does not match destination field type"),!1):void t(e(c[a]),e(d[a])):(console.trace("Error: source fields do not match destination fields"),!1)})}var n=acf_duplicate_repeater.options,i={_default:function(t,a,n){var i=t.find('[type="'+n+'"]');acf.getField(t),acf.getField(a);a.find('[type="'+n+'"]').each(function(t,a){e(this).val(e(i[t]).val())})},button_group:function(t,a){var n=a.find('[type="radio"]');t.find('[type="radio"]').each(function(t,a){if(e(a).prop("checked"))return e(n[t]).trigger("click"),!1})},checkbox:function(t,a){var n=a.find('[type="checkbox"]');t.find('[type="checkbox"]').each(function(t,a){e(n[t]).prop("checked",e(a).prop("checked"))})},color_picker:function(e,t){var a=acf.getField(e),n=acf.getField(t),i=a.$inputText().val();n.$inputText().iris("option","color",i)},date_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},date_time_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},file:function(e,t){var a=e.find(".acf-file-uploader"),n=t.find(".acf-file-uploader");i._default(e,t,"hidden"),a.hasClass("has-value")&&(n.find("div").first().html(a.find("div").first().html()),t.find(".acf-file-uploader").addClass("has-value"))},flexible_content:function(t,n){var i=acf.getField(t),c=acf.getField(n);i.$layouts().each(function(t,n){var i,d=e(n);c.add({layout:d.data("layout")}),i=c.$layouts().last(),a(d,i,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field")})},gallery:function(t,a){var n=t.find(".acf-gallery-attachments"),i=a.find(".acf-gallery-attachments"),c=a.find('input[type="hidden"]'),d=c.attr("name")+"[]";n.children().each(function(t,a){$clone=e(a).clone(),$clone.find('[type="hidden"]').attr("name",d),i.append($clone)})},google_map:function(e,t){var a=acf.getField(e);acf.getField(t).setValue(a.getValue())},group:function(e,t){a(e,t,"> .acf-input > .acf-table > tbody > .acf-row > .acf-field, > .acf-input > .acf-fields > .acf-field")},image:function(e,t){i._default(e,t,"hidden"),t.find("img").attr("src",e.find("img").attr("src")),e.find(".acf-image-uploader").hasClass("has-value")&&t.find(".acf-image-uploader").addClass("has-value")},link:function(e,t){var a=e.find(".link-node"),n=t.find(".link-node");n.html(a.html()),n.attr("href",a.attr("href")),n.attr("target",a.attr("target")),n.trigger("change")},oembed:function(e,t){t.find('[data-name="search-input"]').val(e.find('[type="hidden"]').val()).trigger("blur")},post_object:function(e,t){i.select(e,t)},radio:function(e,t){i.button_group(e,t),i._default(e,t,"text")},range:function(e,t){i._default(e,t,"range"),i._default(e,t,"number")},relationship:function(t,a){var n=a.find(".values > .list"),i=a.find(".acf-relationship").children('input[type="hidden"]'),c=i.attr("name")+"[]";t.find(".values > .list").children().each(function(t,a){var i=e(a).clone();i.find('[type="hidden"]').attr("name",c),n.append(i)}),i.trigger("change")},repeater:function(t,n){var i=acf.getField(t),c=acf.getField(n);i.$rows().each(function(t,n){$new_row=c.add(),a(e(n),$new_row,"> .acf-field, > .acf-fields > .acf-field")})},select:function(t,a,n){n=n||" > .acf-input > select";var i=t.find(n),c=a.find(n);1*i.data("ui")&&(c.html(""),i.find("option").each(function(t,a){c.append(e(a).clone())})),$destOpts=c.find("option"),i.find("option").each(function(t,a){e($destOpts[t]).prop("selected",e(a).prop("selected"))})},taxonomy:function(e,t){i.radio(e,t),i.checkbox(e,t),i.select(e,t,"> .acf-input > .acf-taxonomy-field > select")},textarea:function(e,t){t.find("textarea").val(e.find("textarea").val())},time_picker:function(e,t){i._default(e,t,"text"),i._default(e,t,"hidden")},true_false:function(e,t){t.find('[type="checkbox"]').prop("checked",e.find('[type="checkbox"]').prop("checked")),t.find('[type="checkbox"]').trigger("change")},user:function(e,t){i.select(e,t)},wysiwyg:function(e,t){var a,n=acf.getField(e),i=acf.getField(t),c=i.$input().attr("id"),d=n.getValue();a=tinymce.get(c),a?a.setContent(d):i.$input().html(d)}},c=function(t,a){var n=e.extend({},t);return e.each(a,function(a,i){if(void 0!==t[a]){if("events"===a)return void(t.events=e.extend(t.events,i));"function"==typeof i&&(n[a]=t[a])}t[a]=i}),t.parent=n,t};c(acf.models.FlexibleContentField.prototype,{events:{'click [data-name="duplicate-layout"]':"_duplicate"},render:function(){var t;return t=this.parent.render.apply(this,arguments),this.$layouts().each(function(t,a){e(this).find('[data-name="duplicate-layout"]').length||e(this).find(".acf-fc-layout-controls").prepend(n.duplicate_flexible_btn)}),t},_duplicate:function(t){var n,i,c;i=e(t.target).closest(".layout"),i.closest(".acf-field"),this.add({layout:i.data("layout"),before:i}),c=i.prev(".layout"),a(i,c,"> .acf-table > tbody > .acf-row > .acf-field, > .acf-fields > .acf-field"),n=e.Event("acf_duplicated_layout"),n.destination=c,i.trigger(n)}}),c(acf.models.RepeaterField.prototype,{events:{'click a[data-event="duplicate-row"]':"_duplicate"},render:function(){var t;return t=this.parent.render.apply(this,arguments),this.$rows().each(function(t){e(this).find("> td.remove").append(n.duplicate_repeater_btn)}),t},_duplicate:function(t){var n,i,c;e(t.target).hasClass("acf-icon")&&(n=e(t.target).closest(".acf-row"),i=this.add({before:n}),a(n,i),c=e.Event("acf_duplicated_row"),c.destination=i,n.trigger(c))}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGVhdGVyLWR1cGxpY2F0ZS5qcyJdLCJuYW1lcyI6WyIkIiwiY29weV92YWx1ZSIsIiRzcmMiLCIkZGVzdCIsInR5cGUiLCJjb3B5RXZlbnQiLCJkb25lRXZlbnQiLCJhdHRyIiwiRXZlbnQiLCJkZXN0aW5hdGlvbiIsInRyaWdnZXIiLCJpc0RlZmF1bHRQcmV2ZW50ZWQiLCJjb3B5X3ZhbHVlX2NiIiwiX2RlZmF1bHQiLCJjb3B5X3ZhbHVlcyIsIl9zZWxlY3RvciIsIiRzb3VyY2VzIiwiZmluZCIsIiRkZXN0cyIsImVhY2giLCJpIiwiZWwiLCJkYXRhIiwiY29uc29sZSIsInRyYWNlIiwib3B0aW9ucyIsImFjZl9kdXBsaWNhdGVfcmVwZWF0ZXIiLCIkc3JjZXMiLCJhY2YiLCJnZXRGaWVsZCIsInRoaXMiLCJ2YWwiLCJidXR0b25fZ3JvdXAiLCIkZGVzdFJhZGlvIiwicHJvcCIsImNoZWNrYm94IiwiJGRlc3RDQiIsImNvbG9yX3BpY2tlciIsInNyY0ZpZWxkIiwiZGVzdEZpZWxkIiwiJGlucHV0VGV4dCIsImlyaXMiLCJkYXRlX3BpY2tlciIsImRhdGVfdGltZV9waWNrZXIiLCJmaWxlIiwiJHNyY1VwbCIsIiRkZXN0VXBsIiwiaGFzQ2xhc3MiLCJmaXJzdCIsImh0bWwiLCJhZGRDbGFzcyIsImZsZXhpYmxlX2NvbnRlbnQiLCIkbGF5b3V0cyIsImxheW91dCIsIiRuZXdfbGF5b3V0IiwiJGxheW91dCIsImFkZCIsImxhc3QiLCJnYWxsZXJ5IiwiJHNyY0xpc3QiLCIkZGVzdExpc3QiLCIkaW5wdXQiLCJuYW1lIiwiY2hpbGRyZW4iLCIkY2xvbmUiLCJjbG9uZSIsImFwcGVuZCIsImdvb2dsZV9tYXAiLCJzZXRWYWx1ZSIsImdldFZhbHVlIiwiZ3JvdXAiLCJpbWFnZSIsImxpbmsiLCIkc3JjTm9kZSIsIiRkZXN0Tm9kZSIsIm9lbWJlZCIsInBvc3Rfb2JqZWN0IiwicmFkaW8iLCJyYW5nZSIsInJlbGF0aW9uc2hpcCIsInJlcGVhdGVyIiwiJHJvd3MiLCJyb3ciLCIkbmV3X3JvdyIsInNlbGVjdCIsIiRzcmNTZWxlY3QiLCIkZGVzdFNlbGVjdCIsIiRkZXN0T3B0cyIsInRheG9ub215IiwidGV4dGFyZWEiLCJ0aW1lX3BpY2tlciIsInRydWVfZmFsc2UiLCJ1c2VyIiwid3lzaXd5ZyIsImVkaXRvciIsImRlc3RfaWQiLCJ0aW55bWNlIiwiZ2V0Iiwic2V0Q29udGVudCIsIl9leHRlbmQiLCJvYmoiLCJleHRlbmQiLCJwYXJlbnQiLCJrIiwidiIsImV2ZW50cyIsIm1vZGVscyIsIkZsZXhpYmxlQ29udGVudEZpZWxkIiwicHJvdG90eXBlIiwiY2xpY2sgW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0iLCJyZW5kZXIiLCJyZXQiLCJhcHBseSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInByZXBlbmQiLCJkdXBsaWNhdGVfZmxleGlibGVfYnRuIiwiX2R1cGxpY2F0ZSIsImUiLCJkdXBsaWNhdGVkRXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiYmVmb3JlIiwicHJldiIsIlJlcGVhdGVyRmllbGQiLCJjbGljayBhW2RhdGEtZXZlbnQ9XCJkdXBsaWNhdGUtcm93XCJdIiwiZHVwbGljYXRlX3JlcGVhdGVyX2J0biIsIiRzb3VyY2UiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBaU9ULFFBQVNDLEdBQVlDLEVBQU1DLEdBQzFCLEdBQUlDLEdBQ0hDLEVBQ0FDLENBRURGLEdBQU9GLEVBQUtLLEtBQUssYUFFakJGLEVBQVlMLEVBQUVRLE1BQU8saUJBQW1CSixHQUN4Q0MsRUFBVUksWUFBY04sRUFFeEJELEVBQUtRLFFBQVNMLEdBR1RBLEVBQVVNLHVCQUlSQyxFQUFlUixHQUlyQlEsRUFBY1IsR0FBT0YsRUFBTUMsR0FGM0JTLEVBQWNDLFNBQVVYLEVBQU1DLEVBQU9DLEdBS3RDRSxFQUFZTixFQUFFUSxNQUFPLGtCQUFvQkosR0FDekNFLEVBQVVHLFlBQWNOLEVBRXhCRCxFQUFLUSxRQUFTSixJQVdmLFFBQVNRLEdBQWFa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SCxFQUFFRSxRQUFRQyxRQUFRLFlBSy9CdEgsRUFBUTJCLEtBQUswQixLQUFPa0UsT0FBUUssSUFHNUJqSCxFQUFhaUgsRUFBUzVILEdBRXRCb0gsRUFBa0J2SCxFQUFFUSxNQUFPLHNCQUMzQitHLEVBQWdCOUcsWUFBY04sRUFFOUI0SCxFQUFRckgsUUFBUzZHLFFBS2pCUyIsImZpbGUiOiJyZXBlYXRlci1kdXBsaWNhdGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpe1xuXHR2YXIgb3B0aW9ucyA9IGFjZl9kdXBsaWNhdGVfcmVwZWF0ZXIub3B0aW9ucyxcblxuXG5cdFx0LyoqXG5cdFx0ICpcdHZhbHVlIGNvcHkgY2FsbGJhY2tzXG5cdFx0ICovXG5cdFx0Y29weV92YWx1ZV9jYiA9IHtcblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggJHNyYywgJGRlc3QsIHR5cGUgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyICRzcmNlcyA9ICRzcmMuZmluZCgnW3R5cGU9XCInK3R5cGUrJ1wiXScpLFxuXHRcdFx0XHRcdHNyY0ZpZWxkID0gYWNmLmdldEZpZWxkKCRzcmMpLFxuXHRcdFx0XHRcdGRlc3RGaWVsZCA9IGFjZi5nZXRGaWVsZCgkZGVzdCk7XG5cdFx0XHRcdC8vZGVzdEZpZWxkLnZhbCggc3JjRmllbGQudmFsICk7XG5cblx0XHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCInK3R5cGUrJ1wiXScpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyh0eXBlLHRoaXMsJHNyY2VzW2ldLCQoICRzcmNlc1tpXSApLnZhbCgpKVxuXHRcdFx0XHRcdCQodGhpcykudmFsKCAkKCAkc3JjZXNbaV0gKS52YWwoKSApO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSxcblx0XHRcdGJ1dHRvbl9ncm91cDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdHZhciAkZGVzdFJhZGlvID0gJGRlc3QuZmluZCgnW3R5cGU9XCJyYWRpb1wiXScpO1xuXHRcdFx0XHQkc3JjLmZpbmQoJ1t0eXBlPVwicmFkaW9cIl0nKS5lYWNoKCBmdW5jdGlvbihpLGVsKSB7XG5cdFx0XHRcdFx0aWYgKCAkKGVsKS5wcm9wKCdjaGVja2VkJykgKSB7XG5cdFx0XHRcdFx0XHQkKCAkZGVzdFJhZGlvW2ldICkudHJpZ2dlcignY2xpY2snICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRjaGVja2JveDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdHZhciAkZGVzdENCID0gJGRlc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpO1xuXHRcdFx0XHQkc3JjLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS5lYWNoKCBmdW5jdGlvbihpLGVsKSB7XG5cdFx0XHRcdFx0JCggJGRlc3RDQltpXSApLnByb3AoJ2NoZWNrZWQnLCAkKGVsKS5wcm9wKCdjaGVja2VkJykgKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdFx0Y29sb3JfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0dmFyIHNyY0ZpZWxkID0gYWNmLmdldEZpZWxkKCRzcmMpLFxuXHRcdFx0XHRcdGRlc3RGaWVsZCA9IGFjZi5nZXRGaWVsZCgkZGVzdCksXG5cdFx0XHRcdFx0dmFsID0gc3JjRmllbGQuJGlucHV0VGV4dCgpLnZhbCgpO1xuXG5cdFx0XHRcdGRlc3RGaWVsZC4kaW5wdXRUZXh0KCkuaXJpcyggJ29wdGlvbicsICdjb2xvcicsIHZhbCApO1xuXHRcdFx0fSxcblx0XHRcdGRhdGVfcGlja2VyOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ3RleHQnICk7XG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHR9LFxuXHRcdFx0ZGF0ZV90aW1lX3BpY2tlcjogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICd0ZXh0JyApO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0fSxcblx0XHRcdGZpbGU6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHR2YXIgJHNyY1VwbCA9ICRzcmMuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJyksXG5cdFx0XHRcdFx0JGRlc3RVcGwgPSAkZGVzdC5maW5kKCcuYWNmLWZpbGUtdXBsb2FkZXInKTtcblxuXHRcdFx0XHQvLyBzZXQgaGlkZGVuXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oICRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXG5cdFx0XHRcdGlmICggJHNyY1VwbC5oYXNDbGFzcygnaGFzLXZhbHVlJykgKSB7XG5cdFx0XHRcdFx0JGRlc3RVcGwuZmluZCgnZGl2JykuZmlyc3QoKS5odG1sKCAkc3JjVXBsLmZpbmQoJ2RpdicpLmZpcnN0KCkuaHRtbCgpICk7XG5cdFx0XHRcdFx0JGRlc3QuZmluZCgnLmFjZi1maWxlLXVwbG9hZGVyJykuYWRkQ2xhc3MoJ2hhcy12YWx1ZScpXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRmbGV4aWJsZV9jb250ZW50OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7XG5cdFx0XHRcdHZhciBzZWxlY3RvciA9ICc+IC5hY2YtaW5wdXQgPiAuYWNmLWZsZXhpYmxlLWNvbnRlbnQgPiAudmFsdWVzID4gLmxheW91dCcsXG5cdFx0XHRcdFx0c3JjRmllbGQgPSBhY2YuZ2V0RmllbGQoJHNyYyksXG5cdFx0XHRcdFx0ZGVzdEZpZWxkID0gYWNmLmdldEZpZWxkKCRkZXN0KTtcblx0XHRcdFx0Ly9hY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuc2V0KCAnJGZpZWxkJywgJGRlc3QgKTtcblxuXHRcdFx0XHRzcmNGaWVsZC4kbGF5b3V0cygpLmVhY2goZnVuY3Rpb24oaSxsYXlvdXQpe1xuXHRcdFx0XHRcdC8vIGVhY2ggcmVwZWF0ZXIgZW50cnkuLi4gZmluZCBmaWVsZHMgaW4gcmVwZWF0ZXIgZW50cnlcblx0XHRcdFx0XHR2YXIgJGxheW91dCA9ICQobGF5b3V0KSxcblx0XHRcdFx0XHRcdCRuZXdfbGF5b3V0O1xuXG5cdFx0XHRcdFx0ZGVzdEZpZWxkLmFkZCggeyBsYXlvdXQ6ICRsYXlvdXQuZGF0YSgnbGF5b3V0JykgfSApO1xuXG5cdFx0XHRcdFx0JG5ld19sYXlvdXQgPSBkZXN0RmllbGQuJGxheW91dHMoKS5sYXN0KCk7XG5cblx0XHRcdFx0XHQvLyB0YmwgKyBibG9jayArIHJvd1xuXHRcdFx0XHRcdGNvcHlfdmFsdWVzKCAkbGF5b3V0LCAkbmV3X2xheW91dCwgJz4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cblx0XHRcdFx0fSk7IC8vIHRhYmxlXG5cdFx0XHR9LFxuXHRcdFx0Z2FsbGVyeTogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdC8vIGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oJHNyYywgJGRlc3QsICdoaWRkZW4nICk7XG5cdFx0XHRcdHZhciAkc3JjTGlzdCA9ICRzcmMuZmluZCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJyksXG5cdFx0XHRcdFx0JGRlc3RMaXN0ID0gJGRlc3QuZmluZCgnLmFjZi1nYWxsZXJ5LWF0dGFjaG1lbnRzJyksXG5cdFx0XHRcdFx0JGlucHV0ID0gJGRlc3QuZmluZCgnaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLFxuXHRcdFx0XHRcdG5hbWUgPSAkaW5wdXQuYXR0cignbmFtZScpICsgJ1tdJztcblxuXHRcdFx0XHQkc3JjTGlzdC5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0JGNsb25lID0gJChlbCkuY2xvbmUoKTtcblx0XHRcdFx0XHQkY2xvbmUuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS5hdHRyKCAnbmFtZScsIG5hbWUgKTtcblx0XHRcdFx0XHQkZGVzdExpc3QuYXBwZW5kKCRjbG9uZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGdvb2dsZV9tYXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHR2YXIgc3JjRmllbGQgPSBhY2YuZ2V0RmllbGQoJHNyYyksXG5cdFx0XHRcdFx0ZGVzdEZpZWxkID0gYWNmLmdldEZpZWxkKCRkZXN0KTtcblx0XHRcdFx0ZGVzdEZpZWxkLnNldFZhbHVlKCBzcmNGaWVsZC5nZXRWYWx1ZSgpICk7XG4vL1x0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdH0sXG5cdFx0XHRncm91cDogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXHRcdFx0XHRjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsICc+IC5hY2YtaW5wdXQgPiAuYWNmLXRhYmxlID4gdGJvZHkgPiAuYWNmLXJvdyA+IC5hY2YtZmllbGQsID4gLmFjZi1pbnB1dCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cdFx0XHR9LFxuXHRcdFx0aW1hZ2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHQvLyBzZXQgaGlkZGVuXG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ19kZWZhdWx0J10oICRzcmMsICRkZXN0LCAnaGlkZGVuJyApO1xuXHRcdFx0XHQkZGVzdC5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCAkc3JjLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycpIClcblx0XHRcdFx0aWYgKCAkc3JjLmZpbmQoJy5hY2YtaW1hZ2UtdXBsb2FkZXInKS5oYXNDbGFzcygnaGFzLXZhbHVlJykgKSB7XG5cdFx0XHRcdFx0JGRlc3QuZmluZCgnLmFjZi1pbWFnZS11cGxvYWRlcicpLmFkZENsYXNzKCdoYXMtdmFsdWUnKVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0bGluazogZnVuY3Rpb24oICRzcmMsICRkZXN0ICkgeyAvLyBPS0FZXG5cdFx0XHRcdHZhciAkc3JjTm9kZSA9ICRzcmMuZmluZCgnLmxpbmstbm9kZScpLFxuXHRcdFx0XHRcdCRkZXN0Tm9kZSA9ICRkZXN0LmZpbmQoJy5saW5rLW5vZGUnKTtcblxuXHRcdFx0XHQkZGVzdE5vZGUuaHRtbCggJHNyY05vZGUuaHRtbCgpICk7XG5cdFx0XHRcdCRkZXN0Tm9kZS5hdHRyKCAnaHJlZicsICRzcmNOb2RlLmF0dHIoICdocmVmJyApICk7XG5cdFx0XHRcdCRkZXN0Tm9kZS5hdHRyKCAndGFyZ2V0JywgJHNyY05vZGUuYXR0ciggJ3RhcmdldCcgKSApO1xuXG5cdFx0XHRcdCRkZXN0Tm9kZS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHRcdH0sXG5cdFx0XHRvZW1iZWQ6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHQkZGVzdC5maW5kKCdbZGF0YS1uYW1lPVwic2VhcmNoLWlucHV0XCJdJylcblx0XHRcdFx0XHQudmFsKCAkc3JjLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJykudmFsKCkgKVxuXHRcdFx0XHRcdC50cmlnZ2VyKCdibHVyJyk7XG5cdFx0XHR9LFxuXHRcdFx0cG9zdF9vYmplY3Q6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydzZWxlY3QnXSgkc3JjLCAkZGVzdCApO1xuXHRcdFx0fSxcblx0XHRcdHJhZGlvOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnYnV0dG9uX2dyb3VwJ10oJHNyYywgJGRlc3QpO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCd0ZXh0Jyk7XG5cdFx0XHR9LFxuXHRcdFx0cmFuZ2U6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCdyYW5nZScpO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCdudW1iZXInKTtcblx0XHRcdH0sXG5cdFx0XHRyZWxhdGlvbnNoaXA6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHR2YXIgJGRlc3RMaXN0ID0gJGRlc3QuZmluZCgnLnZhbHVlcyA+IC5saXN0JyksXG5cdFx0XHRcdFx0JGlucHV0ID0gJGRlc3QuZmluZCgnLmFjZi1yZWxhdGlvbnNoaXAnKS5jaGlsZHJlbignaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLFxuXHRcdFx0XHRcdG5hbWUgPSAkaW5wdXQuYXR0cignbmFtZScpICsgJ1tdJztcblxuXHRcdFx0XHQkc3JjLmZpbmQoJy52YWx1ZXMgPiAubGlzdCcpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpLGVsKXtcblx0XHRcdFx0XHR2YXIgJGNsb25lID0gJChlbCkuY2xvbmUoKTtcblx0XHRcdFx0XHQkY2xvbmUuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKS5hdHRyKCAnbmFtZScsIG5hbWUgKTtcblx0XHRcdFx0XHQkZGVzdExpc3QuYXBwZW5kKCRjbG9uZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkaW5wdXQudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0XHR9LFxuXHRcdFx0cmVwZWF0ZXI6ZnVuY3Rpb24oICRzcmMsICRkZXN0ICkge1xuXHRcdFx0XHR2YXIgc3JjRmllbGQgPSBhY2YuZ2V0RmllbGQoJHNyYyksXG5cdFx0XHRcdFx0ZGVzdEZpZWxkID0gYWNmLmdldEZpZWxkKCRkZXN0KTtcblxuXHRcdFx0XHRzcmNGaWVsZC4kcm93cygpLmVhY2goZnVuY3Rpb24oaSxyb3cpe1xuXHRcdFx0XHRcdCRuZXdfcm93ID0gZGVzdEZpZWxkLmFkZCgpO1xuXHRcdFx0XHRcdGNvcHlfdmFsdWVzKCAkKHJvdyksICRuZXdfcm93LCAnPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gJHNyYy5maW5kKCc+IC5hY2YtaW5wdXQgPiAuYWNmLXJlcGVhdGVyID4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3c6bm90KC5hY2YtY2xvbmUpJykuZWFjaChmdW5jdGlvbihpLHJvdyl7XG5cdFx0XHRcdC8vIFx0Ly8gZWFjaCByZXBlYXRlciBlbnRyeS4uLiBmaW5kIGZpZWxkcyBpbiByZXBlYXRlciBlbnRyeVxuXHRcdFx0XHQvLyBcdHZhciAkbmV3X3JvdyA9IGFjZi5maWVsZHMucmVwZWF0ZXIuYWRkKCk7XG5cdFx0XHRcdC8vXG5cdFx0XHRcdC8vIFx0Y29weV92YWx1ZXMoICQocm93KSwgJG5ld19yb3csICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyApOyAvLyBleGNsdWRlIGNsb25lcyFcblx0XHRcdFx0Ly8gfSk7IC8vIHRhYmxlXG5cdFx0XHR9LFxuXHRcdFx0c2VsZWN0OiBmdW5jdGlvbiggJHNyYywgJGRlc3QsIF9zZWxlY3RvciApIHsgLy8gT0tBWVxuXHRcdFx0XHRfc2VsZWN0b3IgPSBfc2VsZWN0b3IgfHwgJyA+IC5hY2YtaW5wdXQgPiBzZWxlY3QnO1xuXHRcdFx0XHR2YXIgJHNyY1NlbGVjdCA9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHRcdFx0JGRlc3RTZWxlY3QgPSAkZGVzdC5maW5kKCBfc2VsZWN0b3IgKTtcblxuXHRcdFx0XHRpZiAoICRzcmNTZWxlY3QuZGF0YSgndWknKSAqIDEgKSB7XG5cdFx0XHRcdFx0Ly8gc29ydCAkZGVzdCBsaWtlICRzcmNcblx0XHRcdFx0XHQkZGVzdFNlbGVjdC5odG1sKCcnKTtcblx0XHRcdFx0XHQkc3JjU2VsZWN0LmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24oaSxlbCl7XG5cdFx0XHRcdFx0XHQkZGVzdFNlbGVjdC5hcHBlbmQoJChlbCkuY2xvbmUoKSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JGRlc3RPcHRzID0gJGRlc3RTZWxlY3QuZmluZCgnb3B0aW9uJyk7XG5cdFx0XHRcdCRzcmNTZWxlY3QuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbihpLGVsKSB7XG5cdFx0XHRcdFx0JCggJGRlc3RPcHRzW2ldICkucHJvcCgnc2VsZWN0ZWQnLCAkKGVsKS5wcm9wKCdzZWxlY3RlZCcpICk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdHRheG9ub215OiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsncmFkaW8nXSgkc3JjLCAkZGVzdCk7XG5cdFx0XHRcdGNvcHlfdmFsdWVfY2JbJ2NoZWNrYm94J10oJHNyYywgJGRlc3QpO1xuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydzZWxlY3QnXSgkc3JjLCAkZGVzdCwgJz4gLmFjZi1pbnB1dCA+IC5hY2YtdGF4b25vbXktZmllbGQgPiBzZWxlY3QnICk7XG5cdFx0XHR9LFxuXHRcdFx0dGV4dGFyZWE6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHQkZGVzdC5maW5kKCd0ZXh0YXJlYScpLnZhbCggJHNyYy5maW5kKCd0ZXh0YXJlYScpLnZhbCgpICk7XG5cdFx0XHR9LFxuXHRcdFx0dGltZV9waWNrZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydfZGVmYXVsdCddKCRzcmMsICRkZXN0LCAndGV4dCcgKTtcblx0XHRcdFx0Y29weV92YWx1ZV9jYlsnX2RlZmF1bHQnXSgkc3JjLCAkZGVzdCwgJ2hpZGRlbicgKTtcblx0XHRcdH0sXG5cdFx0XHR0cnVlX2ZhbHNlOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIE9LQVlcblx0XHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoJ2NoZWNrZWQnLCAkc3JjLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJykgKTtcblx0XHRcdFx0JGRlc3QuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdFx0fSxcblx0XHRcdHVzZXI6IGZ1bmN0aW9uKCAkc3JjLCAkZGVzdCApIHsgLy8gT0tBWVxuXHRcdFx0XHRjb3B5X3ZhbHVlX2NiWydzZWxlY3QnXSggJHNyYywgJGRlc3QgKTtcblx0XHRcdH0sXG5cdFx0XHR3eXNpd3lnOiBmdW5jdGlvbiggJHNyYywgJGRlc3QgKSB7IC8vIC4uLlxuXHRcdFx0XHR2YXIgc3JjRmllbGQgPSBhY2YuZ2V0RmllbGQoJHNyYyksXG5cdFx0XHRcdFx0ZGVzdEZpZWxkID0gYWNmLmdldEZpZWxkKCRkZXN0KSxcblx0XHRcdFx0XHRkZXN0X2lkID0gZGVzdEZpZWxkLiRpbnB1dCgpLmF0dHIoJ2lkJyksXG5cdFx0XHRcdFx0dmFsID0gc3JjRmllbGQuZ2V0VmFsdWUoKSwgZWRpdG9yO1xuXG5cdFx0XHRcdGVkaXRvciA9IHRpbnltY2UuZ2V0KCBkZXN0X2lkICk7XG5cdFx0XHRcdGlmICggISEgZWRpdG9yICkge1xuXHRcdFx0XHRcdC8vIGVkaXRvciBhbHJlYWR5IGluaXRlZFxuXHRcdFx0XHRcdGVkaXRvci5zZXRDb250ZW50KCB2YWwgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBkZWxheWVkIGluaXRcblx0XHRcdFx0XHRkZXN0RmllbGQuJGlucHV0KCkuaHRtbCggdmFsICk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fTtcblxuXHQvKipcblx0ICpcdENvcHkgdmFsdWVzIGZyb20gb25lIGFjZi1maWVsZCB0byBhbm90aGVyXG5cdCAqXG5cdCAqXHRAcGFyYW0gJHNyYyBqUXVlcnkgb2JqZWN0IGhvbGRpbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgZnJvbVxuXHQgKlx0QHBhcmFtICRkZXN0IGpRdWVyeSBvYmplY3QgaG9sZGluZyB0aGUgLmFjZi1maWVsZCBvYmplY3QgdG8gY29weSB0b1xuXHQgKi9cblx0ZnVuY3Rpb24gY29weV92YWx1ZSggJHNyYywgJGRlc3QgKSB7XG5cdFx0dmFyIHR5cGUsXG5cdFx0XHRjb3B5RXZlbnQsXG5cdFx0XHRkb25lRXZlbnQ7XG5cblx0XHR0eXBlID0gJHNyYy5hdHRyKCdkYXRhLXR5cGUnKTtcblxuXHRcdGNvcHlFdmVudCA9ICQuRXZlbnQoICdhY2ZfZHVwbGljYXRlOicgKyB0eXBlICk7XG5cdFx0Y29weUV2ZW50LmRlc3RpbmF0aW9uID0gJGRlc3Q7XG5cblx0XHQkc3JjLnRyaWdnZXIoIGNvcHlFdmVudCApO1xuXG5cdFx0Ly8gYWxsb3cgY2FuY2VsaW5nXG5cdFx0aWYgKCBjb3B5RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCAhIGNvcHlfdmFsdWVfY2JbIHR5cGUgXSApIHtcblx0XHRcdC8vIERlZmFsdCBiZWhhdmlvdXIgZm9yIHRleHQsIHJhbmdlLCB1cmwsIG51bWJlcixcblx0XHRcdGNvcHlfdmFsdWVfY2IuX2RlZmF1bHQoICRzcmMsICRkZXN0LCB0eXBlICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvcHlfdmFsdWVfY2JbdHlwZV0oICRzcmMsICRkZXN0ICk7XG5cdFx0fVxuXG5cdFx0ZG9uZUV2ZW50ID0gJC5FdmVudCggJ2FjZl9kdXBsaWNhdGVkOicgKyB0eXBlICk7XG5cdFx0ZG9uZUV2ZW50LmRlc3RpbmF0aW9uID0gJGRlc3Q7XG5cblx0XHQkc3JjLnRyaWdnZXIoIGRvbmVFdmVudCApO1xuXHR9XG5cblx0LyoqXG5cdCAqXHRDb3B5IHZhbHVlcyBmcm9tIG9uZSBzZXQgb2YgYWNmLWZpZWxkcyB0byBhbm90aGVyLlxuXHQgKlx0SXQgaXMgYXNzdW1lZCB0aGF0IGJvdGggJHNyYyBhbmQgJGRlc3QgaGF2ZSBpZGVudGljYWwgZmllbGRzXG5cdCAqXG5cdCAqXHRAcGFyYW0gJHNyYyBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0cyB0byBjb3B5IGZyb21cblx0ICpcdEBwYXJhbSAkZGVzdCBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIC5hY2YtZmllbGQgb2JqZWN0IHRvIGNvcHkgdG9cblx0ICpcdEBwYXJhbSBfc2VsZWN0b3IgY3NzIHNlbGVjdG9yIHRvIHNlbGVjdCAuYWNmLWZpZWxkcyBpbiBib3RoICRzcmMgYW5kICRkZXN0XG5cdCAqL1xuXHRmdW5jdGlvbiBjb3B5X3ZhbHVlcyggJHNyYywgJGRlc3QsIF9zZWxlY3RvciApIHtcblx0XHR2YXIgZmllbGRfbWFwXHQ9IHt9LFxuXHRcdFx0X3NlbGVjdG9yID0gX3NlbGVjdG9yIHx8ICc+IC5hY2YtZmllbGQsID4gLmFjZi1maWVsZHMgPiAuYWNmLWZpZWxkJyxcblx0XHRcdCRzb3VyY2VzXHQ9ICRzcmMuZmluZCggX3NlbGVjdG9yICksXG5cdFx0XHQkZGVzdHNcdFx0PSAkZGVzdC5maW5kKCBfc2VsZWN0b3IgKTtcblxuXHRcdCRzb3VyY2VzLmVhY2goIGZ1bmN0aW9uKCBpLCBlbCApe1xuXHRcdFx0aWYgKCAhICRkZXN0c1tpXSApIHtcblx0XHRcdFx0Y29uc29sZS50cmFjZSgnRXJyb3I6IHNvdXJjZSBmaWVsZHMgZG8gbm90IG1hdGNoIGRlc3RpbmF0aW9uIGZpZWxkcycpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICQoICRzb3VyY2VzW2ldICkuZGF0YSgndHlwZScpICE9PSAkKCRkZXN0c1tpXSkuZGF0YSgndHlwZScpICkge1xuXHRcdFx0XHRjb25zb2xlLnRyYWNlKCdFcnJvcjogc291cmNlIGZpZWxkIHR5cGUgZG9lcyBub3QgbWF0Y2ggZGVzdGluYXRpb24gZmllbGQgdHlwZScpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRjb3B5X3ZhbHVlKCAkKCAkc291cmNlc1tpXSApLCAkKCRkZXN0c1tpXSkgKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0RXh0ZW5kIGFjZiBmbGV4aWJsZSBjb250ZW50IGZpZWxkXG5cdCAqL1xuXG5cdHZhciBfZXh0ZW5kID0gZnVuY3Rpb24ob2JqLGV4dGVuZCkge1xuXHRcdHZhciBwYXJlbnQgPSAkLmV4dGVuZCh7fSxvYmopO1xuXHRcdCQuZWFjaChleHRlbmQsZnVuY3Rpb24oayx2KSB7XG5cdFx0XHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2Ygb2JqW2tdICkge1xuXHRcdFx0XHRpZiAoICdldmVudHMnID09PSBrICkge1xuXHRcdFx0XHRcdG9iai5ldmVudHMgPSAkLmV4dGVuZCggb2JqLmV2ZW50cywgdiApO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmICggJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHYgKSB7XG5cdFx0XHRcdFx0cGFyZW50W2tdID0gb2JqW2tdOyAvL1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvYmpba10gPSB2O1xuXHRcdH0pO1xuXHRcdG9iai5wYXJlbnQgPSBwYXJlbnQ7XG5cdFx0cmV0dXJuIG9iajtcblx0fVxuXG5cdF9leHRlbmQoIGFjZi5tb2RlbHMuRmxleGlibGVDb250ZW50RmllbGQucHJvdG90eXBlLCB7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nOiAnX2R1cGxpY2F0ZSdcblx0XHR9LFxuXHRcdHJlbmRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciByZXQ7XG5cblx0XHRcdHJldCA9IHRoaXMucGFyZW50LnJlbmRlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cblx0XHRcdC8vIGFkZCBkdXBsaWNhdGUgYnRuXG5cdFx0XHR0aGlzLiRsYXlvdXRzKCkuZWFjaChmdW5jdGlvbiggaSwgZWwgKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykuZmluZCgnW2RhdGEtbmFtZT1cImR1cGxpY2F0ZS1sYXlvdXRcIl0nKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcuYWNmLWZjLWxheW91dC1jb250cm9scycpLnByZXBlbmQoIG9wdGlvbnMuZHVwbGljYXRlX2ZsZXhpYmxlX2J0biApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9LFxuXHRcdF9kdXBsaWNhdGU6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0dmFyIGxheW91dCxcblx0XHRcdFx0ZHVwbGljYXRlZEV2ZW50LFxuXHRcdFx0XHQkZmllbGQsXG5cdFx0XHRcdCRsYXlvdXQsICAvLyBvcmlnaW5hbCBmaWVsZFxuXHRcdFx0XHQkbmV3X2xheW91dDsgLy8gY2xvbmVkIGZpZWxkXG5cblx0XHRcdC8vIGdldCBsYXlvdXQgd3JhcHBlclxuXHRcdFx0JGxheW91dCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5sYXlvdXQnKTtcblxuXHRcdFx0Ly8gZ2V0IGZsZXhpYmxlX2NvbnRlbnQgZmllbGRcblx0XHRcdCRmaWVsZCA9ICRsYXlvdXQuY2xvc2VzdCgnLmFjZi1maWVsZCcpO1xuXG5cdFx0XHQvLyBhY2Ygc2V0IGZpZWxkIGNvbnRlbnh0XG5cdFx0XHQvL2FjZi5maWVsZHMuZmxleGlibGVfY29udGVudC5zZXQoICckZmllbGQnLCAkZmllbGQgKTtcblxuXHRcdFx0Ly8gYWNmIGFkZCB0YXJnZXQgbGF5b3V0IGJlZm9yZSBzb3VyY2UgbGF5b3V0XG5cdFx0XHR0aGlzLmFkZCgge1xuXHRcdFx0XHRsYXlvdXQ6ICRsYXlvdXQuZGF0YSgnbGF5b3V0JyksXG5cdFx0XHRcdGJlZm9yZTogJGxheW91dCxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBnZXQgdGhlIGFkZGVkIGxheW91dFxuXHRcdFx0JG5ld19sYXlvdXQgPSAkbGF5b3V0LnByZXYoICcubGF5b3V0JyApO1xuXG5cdFx0XHQvLyBjb3B5IHZhbHVlcyBmcm9tIHNvdXJjZSBsYXlvdXQgdG8gZGVzdGluYXRpb25cblx0XHRcdGNvcHlfdmFsdWVzKCAkbGF5b3V0LCAkbmV3X2xheW91dCwgJz4gLmFjZi10YWJsZSA+IHRib2R5ID4gLmFjZi1yb3cgPiAuYWNmLWZpZWxkLCA+IC5hY2YtZmllbGRzID4gLmFjZi1maWVsZCcgKTsgLy8gZXhjbHVkZSBjbG9uZXMhXG5cblx0XHRcdGR1cGxpY2F0ZWRFdmVudCA9ICQuRXZlbnQoICdhY2ZfZHVwbGljYXRlZF9sYXlvdXQnICk7XG5cdFx0XHRkdXBsaWNhdGVkRXZlbnQuZGVzdGluYXRpb24gPSAkbmV3X2xheW91dDtcblxuXHRcdFx0JGxheW91dC50cmlnZ2VyKCBkdXBsaWNhdGVkRXZlbnQgKTtcblxuXHRcdH1cblx0fSk7XG5cblx0Ly9hY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQgPSBhY2YuZmllbGRzLmZsZXhpYmxlX2NvbnRlbnQuZXh0ZW5kKCk7XG5cblx0LyoqXG5cdCAqXHRFeHRlbmQgYWNmIGZsZXhpYmxlIGNvbnRlbnQgZmllbGRcblx0ICovXG5cdCBfZXh0ZW5kKCBhY2YubW9kZWxzLlJlcGVhdGVyRmllbGQucHJvdG90eXBlLCB7XG5cdFx0ZXZlbnRzOiB7XG5cdFx0XHQnY2xpY2sgYVtkYXRhLWV2ZW50PVwiZHVwbGljYXRlLXJvd1wiXSc6ICdfZHVwbGljYXRlJ1xuXHRcdH0sXG5cdFx0cmVuZGVyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHJldDtcblxuXHRcdFx0cmV0ID0gdGhpcy5wYXJlbnQucmVuZGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gYWRkIGR1cGxpY2F0ZSBidG5cblx0XHRcdHRoaXMuJHJvd3MoKS5lYWNoKGZ1bmN0aW9uKGkpe1xuXHRcdFx0XHQkKHRoaXMpLmZpbmQoJz4gdGQucmVtb3ZlJykuYXBwZW5kKCBvcHRpb25zLmR1cGxpY2F0ZV9yZXBlYXRlcl9idG4gKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0sXG5cdFx0X2R1cGxpY2F0ZTogZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdHZhciAkc291cmNlLCAkZGVzdCwgZHVwbGljYXRlZEV2ZW50O1xuXG5cdFx0XHQvLyBnZXQgc291cmNlIHJvd1xuXHRcdFx0aWYoICQoZS50YXJnZXQpLmhhc0NsYXNzKCdhY2YtaWNvbicpICkge1xuXHRcdFx0XHQkc291cmNlID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmFjZi1yb3cnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdC8vIGFkZCBkZXN0aW5hdGlvbiByb3dcblx0XHRcdCRkZXN0ID0gdGhpcy5hZGQoIHsgYmVmb3JlOiAkc291cmNlIH0gKTsgLy8gYWRkIGJlZm9yZSBzb3VyY2UhXG5cblx0XHRcdC8vIGNvcHkgdmFsdWVzIGZyb20gc291cmNlIHJvdyB0byBkZXN0aW5hdGlvblxuXHRcdFx0Y29weV92YWx1ZXMoICRzb3VyY2UsICRkZXN0ICk7XG5cblx0XHRcdGR1cGxpY2F0ZWRFdmVudCA9ICQuRXZlbnQoICdhY2ZfZHVwbGljYXRlZF9yb3cnICk7XG5cdFx0XHRkdXBsaWNhdGVkRXZlbnQuZGVzdGluYXRpb24gPSAkZGVzdDtcblxuXHRcdFx0JHNvdXJjZS50cmlnZ2VyKCBkdXBsaWNhdGVkRXZlbnQgKTtcblx0XHR9LFxuXHR9KTtcblxuXG59KShqUXVlcnkpO1xuIl19
